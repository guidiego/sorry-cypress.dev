{"version":3,"sources":["webpack:///../src/director/storage.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","isMDXComponent"],"mappings":"wPAMaA,G,UAAe,S,0MAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,8BACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAC5E,iBAAQ,CACN,GAAM,SADR,SAGA,8FACA,uFACA,uBAAK,mBAAU,CACX,WAAc,OADb,uDAIL,iBAAQ,CACN,GAAM,UADR,UAGA,sJACA,sBAEE,iBAAQ,CACN,WAAc,MADhB,4BAGE,yBAAgB,CACd,WAAc,MADhB,YAHF,gEASA,iBAAQ,CACN,WAAc,MACb,yBAAgB,CACf,WAAc,MADf,YAFH,oCAME,iBAAQ,CACN,WAAc,MAGd,iBAAQ,CACN,WAAc,MADhB,sDAKA,iBAAQ,CACN,WAAc,MADhB,oDAOJ,iBAAQ,CACN,WAAc,MADhB,6DAKA,iBAAQ,CACN,WAAc,MADhB,+DAKF,iBAAQ,CACN,GAAM,SADR,SAGA,8CACE,gBAAO,CACL,KAAQ,4EACR,WAAc,KAFhB,mBADF,iCAME,gBAAO,CACL,KAAQ,wFACR,WAAc,KACb,yBAAgB,CACf,WAAc,KADf,oBATL,sCAaA,iBAAQ,CACN,GAAM,iBADR,iBAGA,iEACE,yBAAgB,CACd,WAAc,KADhB,YADF,iFAKA,iBAAQ,CACN,GAAM,sBACL,yBAAgB,CACf,WAAc,MADf,uBAGH,oGACA,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,oDAKL,iBAAQ,CACN,GAAM,aACL,yBAAgB,CACf,WAAc,MADf,cAGH,sIACA,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,mCAKL,iBAAQ,CACN,GAAM,aACL,yBAAgB,CACf,WAAc,MADf,cAGH,qDACE,yBAAgB,CACd,WAAc,KADhB,gBAGF,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,4BAKL,iBAAQ,CACN,GAAM,UACL,yBAAgB,CACf,WAAc,MADf,WAGH,iFACE,yBAAgB,CACd,WAAc,KADhB,iBADF,qBAKE,gBAAO,CACL,KAAQ,oEACR,WAAc,KAFhB,UALF,KAUA,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,2BAKL,iBAAQ,CACN,GAAM,sBACL,yBAAgB,CACf,WAAc,MADf,uBAGH,yGACE,yBAAgB,CACd,WAAc,KADhB,gDADF,KAKA,gCACE,yBAAgB,CACd,WAAc,KADhB,sBADF,OAKE,yBAAgB,CACd,WAAc,KADhB,sBALF,qCASE,yBAAgB,CACd,WAAc,KADhB,8BATF,KAaA,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,gCAKL,iBAAQ,CACN,GAAM,gBADR,gBAGA,yEACA,4BACE,gBAAO,CACL,KAAQ,gFACR,WAAc,KACb,yBAAgB,CACf,WAAc,KADf,6BAJL,oGAQA,+DACE,yBAAgB,CACd,WAAc,KADhB,cADF,sEAKA,uBAAK,mBAAU,CACX,UAAa,cACb,WAAc,OAFb,wBAKL,qBAAG,qBAAY,CACX,WAAc,KADf,YAAH,gBAIE,yBAAgB,CACd,WAAc,KADhB,4BAJF,+FAQA,oJACE,gBAAO,CACL,KAAQ,yGACR,WAAc,KACb,yBAAgB,CACf,WAAc,KADf,oCAJL,KAQA,qGACA,+F,wMAKJH,EAAWI,gBAAiB","file":"component---src-director-storage-mdx-5e134b9700bda1a23fd5.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/sorry-cypress.dev/sorry-cypress.dev/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"dummy\"\n    }}>{`Dummy`}</h2>\n    <p>{`Is the default driver and it does nothing - snapshots won't be saved.`}</p>\n    <p>{`Set the environment variable to define the screenshots driver.`}</p>\n    <pre><code {...{\n        \"parentName\": \"pre\"\n      }}>{`SCREENSHOTS_DRIVER=\"../screenshots/dummy.driver\"\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"aws-s3\"\n    }}>{`AWS S3`}</h2>\n    <p>{`The driver generates upload URLs for S3 bucket. When set up properly the following will happen when each test suite finishes:`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`cypress agent reports to `}\n        <inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`director`}</inlineCode>\n        {` what videos and / or failed tests screenshots are availabe.`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}><inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`director`}</inlineCode>\n        {` uses AWS credentials to generate`}\n        <ul {...{\n          \"parentName\": \"li\"\n        }}>\n\n          <li {...{\n            \"parentName\": \"ul\"\n          }}>{`a temporary signed URL for each screenshot / video`}</li>\n\n\n          <li {...{\n            \"parentName\": \"ul\"\n          }}>{`a read URL is saved to associated test results`}</li>\n\n        </ul></li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`cypress agent uses the temporary URL to upload the assets`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`dashboard uses the read URL to display video / screenshots`}</li>\n\n    </ul>\n    <h3 {...{\n      \"id\": \"setup\"\n    }}>{`Setup`}</h3>\n    <p>{`Please make sure that `}\n      <a {...{\n        \"href\": \"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\",\n        \"parentName\": \"p\"\n      }}>{`AWS credentials`}</a>\n      {` with proper access to invoke `}\n      <a {...{\n        \"href\": \"https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#getSignedUrl-property\",\n        \"parentName\": \"p\"\n      }}><inlineCode {...{\n          \"parentName\": \"a\"\n        }}>{`s3.getSignedUrl`}</inlineCode></a>\n      {` are available in the environment.`}</p>\n    <h3 {...{\n      \"id\": \"configuration\"\n    }}>{`Configuration`}</h3>\n    <p>{`You can customize certain aspects of how `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`director`}</inlineCode>\n      {` handles upload and read URLs generation by setting up environment variables.`}</p>\n    <h4 {...{\n      \"id\": \"screenshots_driver\"\n    }}><inlineCode {...{\n        \"parentName\": \"h4\"\n      }}>{`SCREENSHOTS_DRIVER`}</inlineCode></h4>\n    <p>{`Defines what screenshot driver to use. In order to use S3 driver set value:`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`SCREENSHOTS_DRIVER=\"../screenshots/s3.driver\"\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"s3_bucket\"\n    }}><inlineCode {...{\n        \"parentName\": \"h4\"\n      }}>{`S3_BUCKET`}</inlineCode></h4>\n    <p>{`Set the bucket name to store the asset. There's no default value, you have to set it before using the driver.`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`S3_BUCKET=\"your_bucket_name\"\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"s3_region\"\n    }}><inlineCode {...{\n        \"parentName\": \"h4\"\n      }}>{`S3_REGION`}</inlineCode></h4>\n    <p>{`AWS region, default value is `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`\"us-east-1\"`}</inlineCode></p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`S3_REGION=\"us-east-1\"\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"s3_acl\"\n    }}><inlineCode {...{\n        \"parentName\": \"h4\"\n      }}>{`S3_ACL`}</inlineCode></h4>\n    <p>{`ACL settings that for new S3 items. The default value is `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`\"public-read\"`}</inlineCode>\n      {`. Read more about `}\n      <a {...{\n        \"href\": \"https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html\",\n        \"parentName\": \"p\"\n      }}>{`S3 ACL`}</a>\n      {`.`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`S3_ACL=\"public-read\"\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"s3_read_url_prefix\"\n    }}><inlineCode {...{\n        \"parentName\": \"h4\"\n      }}>{`S3_READ_URL_PREFIX`}</inlineCode></h4>\n    <p>{`The URL prefix to use when reading the screenshots / video. The default value is `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`https://\\${S3_BUCKET}.s3.amazonaws.com/\\${key}`}</inlineCode>\n      {`.`}</p>\n    <p>{`Setting `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`S3_READ_URL_PREFIX`}</inlineCode>\n      {` to `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`http://example.com`}</inlineCode>\n      {` will change the generated URL to `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`https://example.com/\\${key}`}</inlineCode>\n      {`.`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`S3_READ_URL_PREFIX=<null>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"minio-driver\"\n    }}>{`Minio Driver`}</h2>\n    <p>{`Thanks @StefanS-O for contributing minio driver!`}</p>\n    <p>{`See `}\n      <a {...{\n        \"href\": \"https://github.com/agoldis/sorry-cypress/blob/master/docker-compose.minio.yml\",\n        \"parentName\": \"p\"\n      }}><inlineCode {...{\n          \"parentName\": \"a\"\n        }}>{`docker-compose.minio.yml`}</inlineCode></a>\n      {` for ready-to-use sorry-cypress configuration that uses locally hosted Minio as a storage layer.`}</p>\n    <p>{`To run on the local machine, edit your `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`/etc/hosts`}</inlineCode>\n      {` file to allow cypress agents discover the local instance of minio`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`127.0.0.1 storage\n`}</code></pre>\n    <p><strong {...{\n        \"parentName\": \"p\"\n      }}>{`Warning!`}</strong>\n      {` The example `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`docker-compose.minio.yml`}</inlineCode>\n      {` deletes existing buckets, so please test - or remove from the docker file after first run!`}</p>\n    <p>{`You should be able to change the environment variables according to your Minio setup. Please refer to the default values at `}\n      <a {...{\n        \"href\": \"https://github.com/agoldis/sorry-cypress/blob/master/packages/director/src/screenshots/minio/config.ts\",\n        \"parentName\": \"p\"\n      }}><inlineCode {...{\n          \"parentName\": \"a\"\n        }}>{`src/screenshots/minio/config.ts`}</inlineCode></a>\n      {`.`}</p>\n    <p>{`The available minio configuration resembles S3 storage driver configruation.`}</p>\n    <p>{`Treat your Minio keys and secrets AWS credentials and hide them.`}</p>\n\n  </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}